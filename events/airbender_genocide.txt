add_namespace = airbender_genocide


#Temple capitulation
country_event = {
	id = airbender_genocide.1
	title = airbender_genocide_temple_conquered_title
	desc = airbender_genocide_temple_conquered_description
	picture = GFX_report_event_west_temple

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
 		hidden_effect = {
			if = {
				limit = {
					has_country_flag = conquered_air_temple_count
				}
				set_country_flag = {
					flag = conquered_air_temple_count
					value = 0
				}
			}
			modify_country_flag = {
				flag = conquered_air_temple_count
				value = 1
			}

			ROOT = {
				every_controlled_state = {
					transfer_state_to = FROM
				}
				leave_faction = yes
				remove_ideas = pacifist_detachment
				set_cosmetic_tag = WAT_exterminated
				country_lock_all_division_template = yes
				add_ideas = no_ruler
			}
			add_named_threat = {
				threat = 10
				name = FIR_air_nomad_genocide
			}
		}
 	}
	option = {
		name = airbender_genocide_temple_conquered_answer
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 167
						state = 232
						state = 181
						state = 200
						state = 175
						state = 222
						state = 148
						state = 123
						state = 112
						state = 208
						state = 118
						state = 111
						state = 100
						state = 82
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
			}
		}
	}
}


#South temple situation
country_event = {
	id = airbender_genocide.2
	title = airbender_genocide.2.t
	desc = airbender_genocide.2.d
	picture = GFX_report_event_south_temple

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
 		hidden_effect = {
			SAT = {
				white_peace = FIR
				remove_ideas = pacifist_detachment
				set_cosmetic_tag = SAT_exterminated
				#kill_country_leader = yes
				#create_country_leader = {
				#	name = "Extinct Nation"
				#
				#	picture = "Portrait_Southernairtemple_Extinct.dds"
				#	expire = "120.1.1"
				#	ideology = active_pacifism
				#	traits = {
				#		extinguished_population
				#	}
				#}
				add_ideas = no_ruler
			}
			country_lock_all_division_template = yes
			add_named_threat = {
				threat = 10
				name = FIR_air_nomad_genocide
			}
			if = {
				limit = {
					not = {
						has_global_flag = send_aang_away
					}
				}
				random_list = {
					100 = {
						modifier = {
							check_variable = { global.avatar_state > 49}
							add = -100
						}
						FIR = { news_event = { id = news.8  days = 10 } }
					}
					0 = {
						modifier = {
							check_variable = { global.avatar_state > 49}
							add = 100
						}
						FIR = { news_event = { id = news.9  days = 10 } }
					}
				}
			}
		}
 	}

	option = {
		name = airbender_genocide.2.a
		ai_chance = {
			factor = 100
		}
		SAT = {
			transfer_state = 242
			transfer_state = 319
			transfer_state = 274
			transfer_state = 297
			transfer_state = 137
			transfer_state = 203
			transfer_state = 134
			transfer_state = 236
			transfer_state = 329
			transfer_state = 239
			transfer_state = 296
			transfer_state = 125
			transfer_state = 356
			transfer_state = 357
			transfer_state = 258
			transfer_state = 285
			transfer_state = 228
			transfer_state = 260
			give_military_access = FIR
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 242
						state = 319
						state = 274
						state = 297
						state = 137
						state = 203
						state = 134
						state = 236
						state = 329
						state = 239
						state = 296
						state = 125
						state = 356
						state = 357
						state = 258
						state = 285
						state = 228
						state = 260
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
				add_compliance = 100
			}
		}
	}
	option = {
		name = airbender_genocide.2.b
		FIR = {
			transfer_state = 242
			transfer_state = 319
			transfer_state = 274
			transfer_state = 297
			transfer_state = 137
			transfer_state = 203
			transfer_state = 134
			transfer_state = 236
			transfer_state = 329
			transfer_state = 239
			transfer_state = 296
			transfer_state = 125
			transfer_state = 356
			transfer_state = 357
			transfer_state = 258
			transfer_state = 285
			transfer_state = 228
			transfer_state = 260
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 242
						state = 319
						state = 274
						state = 297
						state = 137
						state = 203
						state = 134
						state = 236
						state = 329
						state = 239
						state = 296
						state = 125
						state = 356
						state = 357
						state = 258
						state = 285
						state = 228
						state = 260
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
				add_compliance = 100
			}
		}
	}
}


#North temple situation
country_event = {
	id = airbender_genocide.3
	title = airbender_genocide.3.t
	desc = airbender_genocide.3.d
	picture = GFX_report_event_north_temple

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
 		hidden_effect = {
			NAT = {
				white_peace = FIR
				country_lock_all_division_template = yes
				leave_faction = yes
				remove_ideas = pacifist_detachment
				set_cosmetic_tag = NAT_exterminated
				#kill_country_leader = yes
				#create_country_leader = {
				#	name = "Extinct Nation"
				#
				#	picture = "Portrait_Northernairtemple_Extinct.dds"
				#	expire = "120.1.1"
				#	ideology = active_pacifism
				#	traits = {
				#		extinguished_population
				#	}
				#}
				add_ideas = no_ruler
			}
			add_named_threat = {
				threat = 10
				name = FIR_air_nomad_genocide
			}
		}
 	}

	option = {
		name = airbender_genocide.3.a
		ai_chance = {
			factor = 100
		}
		NAT = {
			transfer_state = 316
			transfer_state = 34
			give_military_access = FIR
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 316
						state = 34
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
			}
		}
	}
	option = {
		name = airbender_genocide.3.b
		FIR = {
			transfer_state = 316
			transfer_state = 34
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 316
						state = 34
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
				add_compliance = 100
			}
		}
	}
}


#East temple situation
country_event = {
	id = airbender_genocide.4
	title = airbender_genocide.4.t
	desc = airbender_genocide.4.d
	picture = GFX_report_event_east_temple

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
 		hidden_effect = {
			EAT = {
				white_peace = FIR
				country_lock_all_division_template = yes
				leave_faction = yes
				remove_ideas = pacifist_detachment
				set_cosmetic_tag = EAT_exterminated
				#kill_country_leader = yes
				#create_country_leader = {
				#	name = "Extinct Nation"
				#
				#	picture = "Portrait_Easternairtemple_Extinct.dds"
				#	expire = "120.1.1"
				#	ideology = active_pacifism
				#	traits = {
				#		extinguished_population
				#	}
				#}
				add_ideas = no_ruler
			}
			add_named_threat = {
				threat = 10
				name = FIR_air_nomad_genocide
			}
		}
 	}

	option = {
		name = airbender_genocide.4.a
		ai_chance = {
			factor = 100
		}
		EAT = {
			transfer_state = 320
			transfer_state = 371
			transfer_state = 373
			transfer_state = 247
			transfer_state = 447
			transfer_state = 188
			transfer_state = 22
			transfer_state = 106
			transfer_state = 24
			give_military_access = FIR
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 320
						state = 371
						state = 373
						state = 247
						state = 447
						state = 188
						state = 22
						state = 106
						state = 24
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
			}
		}
	}
	option = {
		name = airbender_genocide.4.b
		FIR = {
			transfer_state = 320
			transfer_state = 371
			transfer_state = 373
			transfer_state = 247
			transfer_state = 447
			transfer_state = 188
			transfer_state = 22
			transfer_state = 106
			transfer_state = 24
		}
		hidden_effect = {
			every_state = {
				limit = {
					OR = {
						state = 320
						state = 371
						state = 373
						state = 247
						state = 447
						state = 188
						state = 22
						state = 106
						state = 24
					}
				}
				add_dynamic_modifier = { modifier = genocide_state }
				add_compliance = 100
			}
		}
	}

}
